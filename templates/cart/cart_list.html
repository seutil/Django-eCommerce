{% extends 'base.html' %}

{% block head_title %}Корзина{% endblock %}

{% block content %}
    <div class="row vh-100 justify-content-center">
        <div class="col-2 d-flex flex-column row-gap-1">
            <form action="#" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">Купить</button>
            </form>
            <form action="{% url 'clear_cart' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Удалить всё</button>
            </form>
        </div>
        <div class="col-10">
            {% if cart %}
                {% for item in cart %}
                    {% with product=item.product %}
                        <div class="card w-50">
                            <div class="card-header bg-transparent text-center">
                                <img src="{{ product.images.all.first.image.url }}" alt="" height="200">
                            </div>
                            <div class="card-body">
                                <a href="#" class="card-title fs-6">{{ product.name }}</a>
                                <p class="card-text text-truncate">{{ product.price }} &#8381;</p>
                            </div>
                            <div class="card-footer">
                                <form action="{% url 'delete_from_cart' product.pk %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-outline-danger"><i class="bi bi-cart-dash-fill"></i></button>
                                </form>
                            </div>
                        </div>
                    {% endwith %}
                {% endfor %}
            {% else %}
                <p class="text-center text-muted">Похоже на то, что вы ещё не положили ни одного товара в коризну</p>
            {% endif %}
        </div>
    </div>
{% endblock %}